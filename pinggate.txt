#!bin/bash

a=0
b=0
c=0
d=o





echo "██████╗ ██╗███╗   ██╗ ██████╗      ██████╗  █████╗ ████████╗███████╗"
echo "██╔══██╗██║████╗  ██║██╔════╝     ██╔════╝ ██╔══██╗╚══██╔══╝██╔════╝"
echo "██████╔╝██║██╔██╗ ██║██║  ███╗    ██║  ███╗███████║   ██║   █████╗  "
echo "██╔═══╝ ██║██║╚██╗██║██║   ██║    ██║   ██║██╔══██║   ██║   ██╔══╝  "
echo "██║     ██║██║ ╚████║╚██████╔╝    ╚██████╔╝██║  ██║   ██║   ███████╗"
echo "╚═╝     ╚═╝╚═╝  ╚═══╝ ╚═════╝      ╚═════╝ ╚═╝  ╚═╝   ╚═╝   ╚══════╝"


echo "18" > /sys/class/gpio/export 2> /dev/null && echo "<--------------------Exporting GPIO18-------------------->" || echo "<------------------(GPIO Already Exported!)----------------->"
sleep 6
echo "out" > /sys/class/gpio/gpio18/direction && echo "<--------------------Direction Set: Out -------------------->"
sleep 1
echo "<----------------------Starting Pings----------------------->"
sleep 1



ping -c 1 8.8.8.8 | grep "64 bytes" || (( a++ ))
echo $a
sleep 8

ping -c 1 9.9.9.9 | grep "64 bytes" || (( b++ ))
echo $b
sleep 8

ping -c 1 1.0.0.1 | grep "64 bytes" || (( c++ ))
echo $c
sleep 8

ping -c 1 1.1.1.1 | grep "64 bytes" || (( d++ ))
echo $d
sleep 8



if [[ $a = 1 && $b = 1 && $c = 1 && $d = 1 ]]; then
	echo "<--------------------Total Ping Fail!-------------------->"
	echo "<----------------------Gate Opening!--------------------->"
	echo "1" > /sys/class/gpio/gpio18/value
else
	echo "<--------------------Not a total fail!---------------->"
	echo "<----------------------(Gate Normal)-------------------->"
	echo "0" > /sys/class/gpio/gpio18/value
fi 



